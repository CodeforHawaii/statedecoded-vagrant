# State Decoded  / Vagrant Configuration

A Vagrant configuration for State Decoded, to make it easy to get started.

### Install Vagrant

Installing Vagrant is very simpleâ€”simply [follow the instructions](http://docs.vagrantup.com/v2/installation/).

### Start the Vagrant Machine

* Download a copy of this repository and unzip it into a directory.
* At the command line, change into the directory that contains this repository.
* Download the git submodules using: `git submodule init; git submodule update`
* Run the command `vagrant up`. (This can take <10 minutes)

### Watch puppet take care of most of the installation! (hopefully!)
We are using puppet to provision our virtural machine. If you run into problems
at this stage please open a bug on github. Once puppet has finished running
severl things have happened:

* An apache server is running with its doc root at /var/www/statedecoded/htdocs
* A solr server is running with its home set to /var/www/statedecoded/solr_home
* A mysql server is running with a username and password specified at the top of
* manifests/default.pp
* php and all of its dependencies have been installed

At this point you are extremely close to having a running instance of the
statedecoded. What you need to do is finish the
configuration/setup of the statedecoded itself. Refer to the [manual](http://statedecoded.github.io/documentation/installation.html#basic-configuration) for the
rest of the pieces. Namely, you still need to download some laws in XML, rename
config-sample.inc.php and
setup .htaccess for the admin portion of the site. Once that is all done you should
be able to run the parser from within the statedecoded site that imports the laws into mysql and solr.


### If all else fails!

If the puppet install is causing more problems than it is worth the manual
install process also works. Look [here](http://statedecoded.github.io/documentation/installation.html#basic-configuration)!


### Debugging notes

Solr's admin interface is reachable at:
http://localhost:8983/solr/#

You can run solr as a foreground process to see if it is having problems on
startup/running with (assuming you did the puppet install):
`/usr/bin/java -Dsolr.solr.home=/var/www/statedecoded/solr_home
-Djetty.home=/opt/solr/example -Djava.io.tmpdir=/tmp -jar
/opt/solr/example/start.jar`

The php error log's generated by the statedecoded live in `/var/log/apache2/`

Remeber that patience is a virtue :)
